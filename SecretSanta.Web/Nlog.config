<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
	  inernalLogLevel="Trace"
	  internalLogFile="C:\Users\sankeerth.lamba\Documents\Code\SecretSanta\internal_logs\internallog.txt"
	  >
	<variable name="LogDirectory" value="${gdc:LogDirectory}"></variable>
	<targets>
		<target name="logfile" xsi:type="File"
				fileName="C:\Users\sankeerth.lamba\Documents\Code\SecretSanta/logs/${shortdate}_logfile.txt"
				layout="${longdate} ${level:uppercase=true} ${message}"/>
		<target name="database"
				xsi:type="Database"
				ConnectionString="Data Source=TEKFRIDAY282;Initial Catalog=Error_Log;User ID=sa;Password=friday123!;Connect Timeout=60;Encrypt=False;TrustServerCertificate=False;ApplicationIntent=ReadWrite;MultiSubnetFailover=False"
				
				commandText="Insert into logs(date,level,message,machinename,logger) values(@date,@level,@message,@machinename,@logger)">
			<parameter name="@date" layout="${date}" />
			<parameter name="@level" layout="${level}" />
			<parameter name="@message" layout="${message}" />
			<parameter name="@machinename" layout="${machinename}" />
			<parameter name="@logger" layout="${logger}" />

		</target>
	</targets>
	<rules>
		<logger name="*" minlevel="Debug" writeTo="logfile"/>
		<logger name="*" minlevel="Debug" writeTo="database"/>
	</rules>
</nlog>